<div>
  <% pending_requests = requests.select(&:pending?) %>
  <% past_requests = requests.reject(&:pending?) %>

  <% if requests.any? %>
    <% if pending_requests.any? %>
      <h3 class="text-md font-semibold text-yellow-600 mb-2">
        <%= t("dashboard.my_adoptions.pending_title") %>
      </h3>
      <ul class="space-y-4 mb-6">
        <% pending_requests.each do |request| %>
          <li class="border rounded p-4 bg-white shadow-sm">
            <div class="flex justify-between items-center">
              <div>
                <h4 class="font-bold">
                  <%= link_to request.pet.name, pet_path(request.pet), class: "text-blue-600 hover:underline" %>
                </h4>
                <!-- Status Badge -->
                <span class="inline-block px-2 py-1 mt-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                  <%= t("dashboard.my_adoptions.pending_status") %>
                </span>
                <% if request.message.present? %>
                  <p class="text-gray-500 text-sm mt-1 italic">"<%= request.message %>"</p>
                <% end %>
              </div>

              <!-- Cancel Button -->
              <%= button_to t("dashboard.my_adoptions.cancel"),
                            cancel_adoption_request_path(request),
                            method: :patch,
                            class: "inline-block px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200" %>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>

    <% if past_requests.any? %>
      <h3 class="text-md font-semibold text-gray-700 mb-2">
        <%= t("dashboard.my_adoptions.past_title") %>
      </h3>
      <ul class="space-y-4">
        <% past_requests.each do |request| %>
          <% status_classes = {
               approved: 'bg-green-100 text-green-800',
               rejected: 'bg-red-100 text-red-800',
               cancelled: 'bg-gray-200 text-gray-700'
             }[request.status.to_sym] %>

          <li class="border rounded p-4 bg-gray-50 shadow-sm">
            <div>
              <h4 class="font-bold">
                <%= link_to request.pet.name, pet_path(request.pet), class: "text-blue-600 hover:underline" %>
              </h4>

              <!-- Status Badge -->
              <span class="inline-block px-2 py-1 mt-1 text-xs font-semibold rounded-full <%= status_classes %>">
                <%= t("dashboard.my_adoptions.statuses.#{request.status}") %>
              </span>

              <% if request.message.present? %>
                <p class="text-gray-500 text-sm mt-1 italic">"<%= request.message %>"</p>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>
  <% else %>
    <p class="text-gray-500"><%= t("dashboard.my_adoptions.none") %></p>
  <% end %>
</div>
